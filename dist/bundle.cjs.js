"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var fenugreekCollections=require("fenugreek-collections"),graphCurry=require("graph-curry"),game_grid=require("game_grid"),column=game_grid.Node.column,row=game_grid.Node.row,gNode=game_grid.Node.node,id$1=game_grid.Node.id,defP=Object.assign({},gNode(),{player:null}),node=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object.assign({},gNode(e,n),{player:r})},player$2=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:defP).player;return e},copy$1=function(e){return node(column(e),row(e),player$2(e))},setPlayer=function(e){return function(n){return node(column(n),row(n),e)}},isFree=function(e){return!!e&&null==player$2(e)},claim$1=function(e){return function(n){return isFree(n)?setPlayer(e)(n):n}},unClaim=function(e){return setPlayer(null)(e)},samePlayer=function(e){return function(n){return player$2(e)===player$2(n)}},sameID$1=function(e){return function(n){return id$1(e)===id$1(n)}},node$1=Object.freeze({node:node,player:player$2,copy:copy$1,setPlayer:setPlayer,isFree:isFree,claim:claim$1,unClaim:unClaim,samePlayer:samePlayer,sameID:sameID$1}),playerInit={name:"",score:0,id:null},player=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{name:e,score:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,id:arguments.length>2&&void 0!==arguments[2]?arguments[2]:e}},name=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:playerInit).name;return e},score=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:playerInit).score;return e},id=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:playerInit).id;return e},copy=function(e){return player(name(e),score(e),id(e))},setName=function(e){return function(n){return player(e,score(n),id(n))}},setID=function(e){return function(n){return player(name(n),score(n),e)}},setScore=function(e){return function(n){return player(name(n),e,id(n))}},hasID=function(e){return function(n){return n.id===e}},sameID=function(e){return function(n){return id(e)===id(n)}},updatePlayer=function(e){return function(n){return sameID(e)(n)?Object.assign({},n,e):n}},resetScore=setScore(0),incrementScore=function(e){return setScore(score(e)+1)(e)},decrementScore=function(e){return setScore(score(e)-1)(e)},claim=function(e){return claim$1(id(e))},player$1=Object.freeze({playerInit:playerInit,player:player,name:name,score:score,id:id,copy:copy,setName:setName,setID:setID,setScore:setScore,hasID:hasID,sameID:sameID,updatePlayer:updatePlayer,resetScore:resetScore,incrementScore:incrementScore,decrementScore:decrementScore,claim:claim}),samePos=game_grid.Compare.samePos,nextFree=function(e){return fenugreekCollections.spread(e).find(isFree)},lastFree=function(e){return fenugreekCollections.spread(e).reverse().find(isFree)},hasFree=function(e){return fenugreekCollections.some(e)(isFree)},byPlayer=function(e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return fenugreekCollections.filter(e)(samePlayer({player:n}))}},exceeds=function(e){return function(n){return fenugreekCollections.asSet(n).size>e}},anyExceed=function(e){return function(n){return fenugreekCollections.some(n)(exceeds(e))}},byExcess=function(e){return function(n){return fenugreekCollections.filter(n)(exceeds(e))}},callIf=function(e){return function(n){return function(r){return n(r)?e(r):r}}},repIf=function(e){return function(n){return function(r){return n(r)?e:r}}},repPos=function(e){return repIf(e)(samePos(e))},repID=function(e){return repIf(e)(samePos(e))},replace=function(e){return function(n){return fenugreekCollections.map(n)(repPos(e))}},filter$1=Object.freeze({nextFree:nextFree,lastFree:lastFree,hasFree:hasFree,byPlayer:byPlayer,exceeds:exceeds,anyExceed:anyExceed,byExcess:byExcess,callIf:callIf,repIf:repIf,repPos:repPos,repID:repID,replace:replace}),slicedToArray=function(){function e(e,n){var r=[],t=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(t=(i=s.next()).done)&&(r.push(i.value),!n||r.length!==n);t=!0);}catch(e){o=!0,a=e}finally{try{!t&&s.return&&s.return()}finally{if(o)throw a}}return r}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),toConsumableArray=function(e){if(Array.isArray(e)){for(var n=0,r=Array(e.length);n<e.length;n++)r[n]=e[n];return r}return Array.from(e)},graph=graphCurry.Graph.graph,nodes=graphCurry.Graph.nodes,gen=game_grid.Grid.genNodes,omniComps=game_grid.Components.omniComps,genNodes=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return gen(e,n).map(copy$1)},board=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return graph.apply(void 0,toConsumableArray(genNodes(e,n)))},playerNodes=function(e){return function(n){return byPlayer(nodes(e))(id(n))}},playerGraph=function(e){return function(n){return graph.apply(void 0,toConsumableArray(playerNodes(e)(n)))}},hasWinComp=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return fenugreekCollections.some(omniComps(e))(exceeds(n))},winComps=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return byExcess(n)(omniComps(e))},board$1=Object.freeze({genNodes:genNodes,board:board,playerNodes:playerNodes,playerGraph:playerGraph,hasWinComp:hasWinComp,winComps:winComps}),graph$1=graphCurry.Graph.graph,omniComps$1=game_grid.Components.omniComps,byCol=game_grid.Filter.byCol,dPlr=[player("player0",0,0),player("player1",0,1)],dNod=genNodes(7,6),init={column:0,nodes:genNodes(),players:dPlr,inPlay:!1,min:3},game=function(){return{players:arguments.length>0&&void 0!==arguments[0]?arguments[0]:dPlr,nodes:arguments.length>1&&void 0!==arguments[1]?arguments[1]:dNod,column:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,inPlay:arguments.length>3&&void 0!==arguments[3]&&arguments[3],min:arguments.length>4&&void 0!==arguments[4]?arguments[4]:3}},column$1=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:init).column;return e},nodes$1=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:init).nodes;return e},inPlay=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:init).inPlay;return e},min=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:init).min;return e},players=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:init).players;return e},active=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:init,n=slicedToArray(e.players,2),r=n[0];n[1];return r},passive=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:init,n=slicedToArray(e.players,2),r=(n[0],n[1]);return r},setNodes=function(e){return function(n){return game(players(n),e,column$1(n),inPlay(n),min(n))}},setColumn=function(e){return function(n){return game(players(n),nodes$1(n),e,inPlay(n),min(n))}},setPlayState=function(e){return function(n){return game(players(n),nodes$1(n),column$1(n),!!e,min(n))}},setPlayers=function(e){return function(n){return game(e,nodes$1(n),column$1(n),inPlay(n),min(n))}},setMin=function(e){return function(n){return game(players(n),nodes$1(n),column$1(n),inPlay(n),e)}},copy$2=function(e){return game(players(e),nodes$1(e),column$1(e),inPlay(e),min(e))},resetGame=function(e){return game(players(e))},board$2=function(e){return graph$1.apply(void 0,toConsumableArray(nodes$1(e)))},colNodes=function(e){return byCol(nodes$1(e))(column$1(e))},next=function(e){return lastFree(colNodes(e))},start=function(e){return setPlayState(!0)(e)},stop=function(e){return setPlayState(!1)(e)},canPlay=function(e){return inPlay(e)&&!!next(e)},locked=function(e){return!canPlay(e)},toggleState=function(e){return setPlayState(!inPlay(e))(e)},togglePlayers=function(e){return setPlayers([passive(e),active(e)])(e)},isActive=function(e){return function(n){return sameID(e)(active(n))}},playerNodes$1=function(e){return function(n){return byPlayer(nodes$1(e))(id(n))}},actNodes=function(e){return playerNodes$1(e)(active(e))},passNodes=function(e){return playerNodes$1(e)(passive(e))},playerGraph$1=function(e){return function(n){return graph$1.apply(void 0,toConsumableArray(playerNodes$1(e)(n)))}},actGraph=function(e){return playerGraph$1(e)(active(e))},passGraph=function(e){return playerGraph$1(e)(passive(e))},playerComps=function(e){return function(n){return byExcess(1)(omniComps$1(playerGraph$1(e)(n)))}},actComps=function(e){return playerComps(e)(active(e))},passComps=function(e){return playerComps(e)(passive(e))},isWinner=function(e){return function(n){return anyExceed(min(e))(playerComps(e)(n))}},winner=function(e){return players(e).find(isWinner(e))},endIfWon=function(e){return winner(e)?stop(e):e},claimSwap=function(e){return replace(claim$1(id(active(e)))(next(e)))(nodes$1(e))},claimNext=function(e){return locked(e)?e:endIfWon(setNodes(claimSwap(e))(e))},select=function(e){return locked(e)?e:togglePlayers(claimNext(e))},playerByID=function(e){return function(n){return players(n).find(hasID(e))}},findPlr=function(e){return function(n){return players(n).find(sameID(e))}},hasPlr=function(e){return function(n){return players(n).some(sameID(e))}},mendPlr=function(e){return function(n){return setPlayers(players(n).map(updatePlayer(e)))(n)}},pushPlr=function(e){return function(n){return setPlayers(players(n).concat(e))(n)}},game$1=Object.freeze({game:game,column:column$1,nodes:nodes$1,inPlay:inPlay,min:min,players:players,active:active,passive:passive,setNodes:setNodes,setColumn:setColumn,setPlayState:setPlayState,setPlayers:setPlayers,setMin:setMin,copy:copy$2,resetGame:resetGame,board:board$2,colNodes:colNodes,next:next,start:start,stop:stop,canPlay:canPlay,locked:locked,toggleState:toggleState,togglePlayers:togglePlayers,isActive:isActive,playerNodes:playerNodes$1,actNodes:actNodes,passNodes:passNodes,playerGraph:playerGraph$1,actGraph:actGraph,passGraph:passGraph,playerComps:playerComps,actComps:actComps,passComps:passComps,isWinner:isWinner,winner:winner,endIfWon:endIfWon,claimSwap:claimSwap,claimNext:claimNext,select:select,playerByID:playerByID,findPlr:findPlr,hasPlr:hasPlr,mendPlr:mendPlr,pushPlr:pushPlr});exports.Board=board$1,exports.Filter=filter$1,exports.Game=game$1,exports.Node=node$1,exports.Player=player$1;
//# sourceMappingURL=bundle.cjs.js.map
